.. _design_uc02 :

Conduct on-demand processing
============================

This use case aims at using TEP Urban for submitting processing on demand driven by the Area of interest search or the data selection


On demand data processing from portal
-------------------------------------

Some dataset can be asked on demand by the user to the production center.

Next figure depicts the sequence that consists of requesting a processing on demand based on a previous dataset selection as described in :ref:`design_uc01_dds`.


.. uml::
  :caption: On demand data processing submission
  :align: center


  actor "User" as U
  participant "Portal" as P
  database "Portal database" as PDB
  participant "Web Processing Service" as WPS

  U -> P : Select processing service
  P -> U : Processing service description (input, output...)

  alt direct remote WPS

  U -> WPS : submit WPS execute request
  activate WPS
  WPS -> U : WPS process id
  deactivate WPS
  U -> P : save processing job information
  activate P
  P -> PDB : save job
  P -> U : return job id
  deactivate P

  else proxied remote WPS

  U -> P : submit WPS execute request
  activate P
  P -> P : proxy WPS request
  activate P #DarkSalmon
  P -> WPS : submit WPS execute request
  activate WPS
  WPS -> P : WPS process id
  deactivate WPS
  deactivate P
  P -> U : WPS process id
  U -> P : save processing job information
  P -> PDB : save job
  P -> U : return job id
  deactivate P

  end


.. warning:: 
  
  This scenario illustration does not take into account the quota and credit management on purpose for readibility reason. All details about accounting operations that may apply to this scenario are described in the :ref:`dynamic_accounting` section.



Precessing execution in the processing centers
----------------------------------------------

    
.. todo:: *BC* sequence diagram and description of the interaction of the Portal to the processing center via WPS

5)  Processing center generates the new product.
    
.. todo:: *BC* sequence diagram and description of the gneneration of the products

9)  New product is registered to the catalogue and result report to the portal, where the user can visualise the result and decide if chosen parameter setting was sufficient.
   
.. todo:: *BC* sequence diagram and description of the product registration at the catalogue



Further visualization and data analysis options on the produced data are detailed in the :ref:`_design_uc01` section.

.. _design_uc01_dds :





